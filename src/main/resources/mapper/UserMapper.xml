<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.qsky.mapper.UserMapper">

  <resultMap id="BaseResultMap" type="cn.qsky.entity.User">
    <result column="uid" jdbcType="VARCHAR" property="uid"/>
    <result column="user_name" jdbcType="VARCHAR" property="userName"/>
    <result column="age" jdbcType="INTEGER" property="age"/>
    <result column="register_time" jdbcType="TIMESTAMP" property="registerTime"/>
  </resultMap>

  <select id="getUserByUid" resultMap="BaseResultMap">
    select user.*
    from user
    where uid = #{uid}
  </select>

  <select id="getAll" resultMap="BaseResultMap">
    select * from user
    <where>
      <if test="uid != null and uid != ''">uid = #{uid}</if>
      <if test="userName != null and userName != ''">user_name = #{userName}</if>
    </where>
  </select>

  <insert id="insertOne" parameterType="cn.qsky.entity.User">
    insert into user(uid, user_name, age, register_time)
    VALUES (#{uid}, #{userName}, #{age}, #{registerTime})
  </insert>

  <!--<insert id="insertBatch" parameterType="java.util.List">-->
  <!--INSERT INTO user(uid, user_name, age, register_time)-->
  <!--<foreach collection="list" item="item" index="index" open="(" close=")" separator="union all">-->
  <!--SELECT #{item.name} as a, #{item.age} as b-->
  <!--</foreach>-->
  <!--</insert>-->

  <insert id="insertBatch" parameterType="java.util.List">
    INSERT INTO user(uid, user_name, age, register_time)
    VALUES
    <foreach collection="list" item="items" index="index" separator=",">
      (
      #{items.uid,jdbcType=VARCHAR},
      #{items.userName,jdbcType=VARCHAR},
      #{items.age,jdbcType=INTEGER},
      #{items.registerTime,jdbcType=TIMESTAMP}
      )
    </foreach>
  </insert>
</mapper>